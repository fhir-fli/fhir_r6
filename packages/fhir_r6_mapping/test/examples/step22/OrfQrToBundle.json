{
    "resourceType": "StructureMap",
    "id": "OrfQrToBundle",
    "url": "http://fhir.ch/ig/ch-orf/StructureMap/OrfQrToBundle",
    "name": "OrfQrToBundle",
    "status": "draft",
    "description": "ORF QuestionnaireResponse to Bundle\r\n2021-01-11 Oliver Egger, copyright ahdis ag, Apache License\r\nQRF Questionnaire: http://build.fhir.org/ig/hl7ch/ch-orf/Questionnaire-order-referral-form.html\r\nQRF QuestionnaireResponse: http://build.fhir.org/ig/hl7ch/ch-orf/QuestionnaireResponse-order-referral-form.xml.html\r\nBundle: http://build.fhir.org/ig/hl7ch/ch-orf/StructureDefinition-ch-orf-document.html",
    "structure": [
        {
            "url": "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse",
            "mode": "source",
            "alias": "QuestionnaireResponse"
        },
        {
            "url": "http://hl7.org/fhir/StructureDefinition/Bundle",
            "mode": "target",
            "alias": "Bundle"
        },
        {
            "url": "http://hl7.org/fhir/StructureDefinition/Patient",
            "mode": "target",
            "alias": "Patient"
        },
        {
            "url": "http://hl7.org/fhir/StructureDefinition/Organization",
            "mode": "target",
            "alias": "Organization"
        },
        {
            "url": "http://hl7.org/fhir/StructureDefinition/Practitioner",
            "mode": "target",
            "alias": "Practitioner"
        },
        {
            "url": "http://hl7.org/fhir/StructureDefinition/PractitionerRole",
            "mode": "target",
            "alias": "PractitionerRole"
        },
        {
            "url": "http://hl7.org/fhir/StructureDefinition/ServiceRequest",
            "mode": "target",
            "alias": "ServiceRequest"
        },
        {
            "url": "http://hl7.org/fhir/StructureDefinition/BackboneElement",
            "mode": "target",
            "alias": "BackboneElement"
        }
    ],
    "group": [
        {
            "name": "OrfQrToBundle",
            "typeMode": "none",
            "input": [
                {
                    "name": "qr",
                    "type": "QuestionnaireResponse",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "documentIdentifier",
                    "source": [
                        {
                            "context": "qr"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "documentIdentifier"
                        },
                        {
                            "context": "documentIdentifier",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "urn:ietf:rfc:3986"
                                }
                            ]
                        },
                        {
                            "contextType": "variable",
                            "variable": "uuidDoc",
                            "transform": "uuid"
                        },
                        {
                            "context": "documentIdentifier",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuidDoc"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "orfbundle",
                    "source": [
                        {
                            "context": "qr",
                            "variable": "qrcp"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e"
                        },
                        {
                            "context": "e",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "composition",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Composition"
                                }
                            ]
                        },
                        {
                            "context": "composition",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid",
                            "transform": "uuid"
                        },
                        {
                            "context": "e",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e2"
                        },
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "timestamp",
                            "variable": "timestamp",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "now()"
                                }
                            ]
                        },
                        {
                            "context": "composition",
                            "contextType": "variable",
                            "element": "date",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "timestamp"
                                }
                            ]
                        },
                        {
                            "context": "e2",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "patient",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Patient"
                                }
                            ]
                        },
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid2",
                            "transform": "uuid"
                        },
                        {
                            "context": "e2",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid2"
                                }
                            ]
                        },
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "questionnaireresp",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "qrcp"
                                }
                            ]
                        },
                        {
                            "context": "questionnaireresp",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid4"
                                }
                            ]
                        },
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e5"
                        },
                        {
                            "context": "e5",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "servicerequest",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "ServiceRequest"
                                }
                            ]
                        },
                        {
                            "context": "servicerequest",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid5",
                            "transform": "uuid"
                        },
                        {
                            "context": "e5",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid5"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "orfbundle",
                            "source": [
                                {
                                    "context": "qr",
                                    "element": "questionnaire",
                                    "variable": "can"
                                }
                            ],
                            "target": [
                                {
                                    "context": "bundle",
                                    "contextType": "variable",
                                    "element": "entry",
                                    "variable": "e6"
                                },
                                {
                                    "context": "e6",
                                    "contextType": "variable",
                                    "element": "resource",
                                    "variable": "q",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "can.resolve()"
                                        }
                                    ]
                                },
                                {
                                    "context": "q",
                                    "contextType": "variable",
                                    "element": "id",
                                    "variable": "uuid6",
                                    "transform": "uuid"
                                },
                                {
                                    "context": "e6",
                                    "contextType": "variable",
                                    "element": "fullUrl",
                                    "transform": "append",
                                    "parameter": [
                                        {
                                            "valueString": "urn:uuid:"
                                        },
                                        {
                                            "valueId": "uuid6"
                                        }
                                    ]
                                }
                            ],
                            "dependent": [
                                {
                                    "name": "QrToBundle",
                                    "variable": [
                                        "qr",
                                        "q",
                                        "patient",
                                        "questionnaireresp",
                                        "servicerequest",
                                        "composition",
                                        "bundle"
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "QrToGroups",
            "typeMode": "none",
            "input": [
                {
                    "name": "qr",
                    "type": "QuestionnaireResponse",
                    "mode": "source"
                },
                {
                    "name": "patient",
                    "type": "Patient",
                    "mode": "target"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                },
                {
                    "name": "composition",
                    "type": "Composition",
                    "mode": "target"
                },
                {
                    "name": "serviceRequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "grporder",
                    "source": [
                        {
                            "context": "qr",
                            "element": "item",
                            "variable": "grp",
                            "condition": "linkId = 'order'"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "OrderItems",
                            "variable": [
                                "grp",
                                "bundle",
                                "composition",
                                "serviceRequest"
                            ]
                        }
                    ]
                },
                {
                    "name": "receiver",
                    "source": [
                        {
                            "context": "qr",
                            "element": "item",
                            "variable": "grp",
                            "condition": "linkId = 'receiver'"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "ReceiverInit",
                            "variable": [
                                "grp",
                                "bundle",
                                "composition",
                                "serviceRequest"
                            ]
                        }
                    ]
                },
                {
                    "name": "grppatient",
                    "source": [
                        {
                            "context": "qr",
                            "element": "item",
                            "variable": "grp",
                            "condition": "linkId = 'patient'"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "PatientItems",
                            "variable": [
                                "grp",
                                "patient"
                            ]
                        }
                    ]
                },
                {
                    "name": "grprequestedencounter",
                    "source": [
                        {
                            "context": "qr",
                            "element": "item",
                            "variable": "grp",
                            "condition": "linkId = 'requestedEncounter'"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "RequestedEncounterItems",
                            "variable": [
                                "grp",
                                "bundle",
                                "patient",
                                "serviceRequest"
                            ]
                        }
                    ]
                },
                {
                    "name": "grprequestedencounter",
                    "source": [
                        {
                            "context": "qr",
                            "element": "item",
                            "variable": "grp",
                            "condition": "linkId = 'coverage'"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "Coverage",
                            "variable": [
                                "grp",
                                "bundle",
                                "patient",
                                "serviceRequest"
                            ]
                        }
                    ]
                },
                {
                    "name": "grpsender",
                    "source": [
                        {
                            "context": "qr",
                            "element": "item",
                            "variable": "grp",
                            "condition": "linkId = 'sender'"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "SenderAuthorInit",
                            "variable": [
                                "grp",
                                "bundle",
                                "composition",
                                "serviceRequest"
                            ]
                        }
                    ]
                },
                {
                    "name": "grpsender",
                    "source": [
                        {
                            "context": "qr",
                            "element": "item",
                            "variable": "grp",
                            "condition": "linkId = 'receiverCopies'"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "ReceiverCopy",
                            "variable": [
                                "grp",
                                "bundle",
                                "composition",
                                "serviceRequest"
                            ]
                        }
                    ]
                },
                {
                    "name": "grpsender",
                    "source": [
                        {
                            "context": "qr",
                            "element": "item",
                            "variable": "grp",
                            "condition": "linkId = 'appointment'"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "Appointment",
                            "variable": [
                                "grp",
                                "bundle",
                                "composition",
                                "serviceRequest"
                            ]
                        }
                    ]
                },
                {
                    "name": "previousResults",
                    "source": [
                        {
                            "context": "qr",
                            "element": "item",
                            "variable": "grp",
                            "condition": "linkId = 'previousResults'"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "PreviousResults",
                            "variable": [
                                "grp",
                                "bundle",
                                "serviceRequest"
                            ]
                        }
                    ]
                },
                {
                    "name": "note",
                    "source": [
                        {
                            "context": "qr",
                            "element": "item",
                            "variable": "grp",
                            "condition": "linkId = 'note'"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "Note",
                            "variable": [
                                "grp",
                                "serviceRequest"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "OrderItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                },
                {
                    "name": "composition",
                    "mode": "target"
                },
                {
                    "name": "serviceRequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "order.title",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.title') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "composition",
                            "contextType": "variable",
                            "element": "title",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.valueString"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "order.type",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.type') and answer.exists())"
                        }
                    ],
                    "rule": [
                        {
                            "name": "answer",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "answer",
                                    "variable": "answer"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "type",
                                    "source": [
                                        {
                                            "context": "answer",
                                            "type": "Coding",
                                            "element": "value",
                                            "variable": "coding"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "composition",
                                            "contextType": "variable",
                                            "element": "type",
                                            "variable": "comptype"
                                        },
                                        {
                                            "context": "comptype",
                                            "contextType": "variable",
                                            "element": "coding",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "coding"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "order.category",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.category') and answer.exists())"
                        }
                    ],
                    "rule": [
                        {
                            "name": "answer",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "answer",
                                    "variable": "answer"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "category",
                                    "source": [
                                        {
                                            "context": "answer",
                                            "type": "Coding",
                                            "element": "value",
                                            "variable": "coding"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "composition",
                                            "contextType": "variable",
                                            "element": "category",
                                            "variable": "compcat"
                                        },
                                        {
                                            "context": "compcat",
                                            "contextType": "variable",
                                            "element": "coding",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "coding"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "order.precedentDocumentIdentifier",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.precedentDocumentIdentifier') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "composition",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "ext"
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-precedentdocument"
                                }
                            ]
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "value",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Identifier"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "urn:ietf:rfc:3986"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + item.answer.valueString"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "order.placerOrderIdentifier",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.placerOrderIdentifier') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "value",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "placer"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "type",
                            "variable": "type"
                        },
                        {
                            "context": "type",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding"
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://terminology.hl7.org/CodeSystem/v2-0203"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "PLAC"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.valueString"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "order.placerOrderIdentifierDomain",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.placerOrderIdentifierDomain') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "value",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "placer"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.valueString"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "order.fillerOrderIdentifier",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.fillerOrderIdentifier') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "value",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "filler"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "type",
                            "variable": "type"
                        },
                        {
                            "context": "type",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding"
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://terminology.hl7.org/CodeSystem/v2-0203"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "FILL"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.valueString"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "order.fillerOrderIdentifierDomain",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.fillerOrderIdentifierDomain') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "value",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "filler"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.valueString"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.dateTime') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "authoredOn",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.priority') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "priority",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value.code"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "order.notificationContactDocument",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "(linkId.value = 'order.notificationContactDocument')"
                        }
                    ],
                    "rule": [
                        {
                            "name": "order.notificationContactDocument.items",
                            "source": [
                                {
                                    "context": "item"
                                }
                            ],
                            "target": [
                                {
                                    "context": "bundle",
                                    "contextType": "variable",
                                    "element": "entry",
                                    "variable": "e4"
                                },
                                {
                                    "context": "e4",
                                    "contextType": "variable",
                                    "element": "resource",
                                    "variable": "practitionerRoleDataEnterer",
                                    "transform": "create",
                                    "parameter": [
                                        {
                                            "valueString": "PractitionerRole"
                                        }
                                    ]
                                },
                                {
                                    "context": "practitionerRoleDataEnterer",
                                    "contextType": "variable",
                                    "element": "id",
                                    "variable": "uuid4",
                                    "transform": "uuid"
                                },
                                {
                                    "context": "e4",
                                    "contextType": "variable",
                                    "element": "fullUrl",
                                    "transform": "append",
                                    "parameter": [
                                        {
                                            "valueString": "urn:uuid:"
                                        },
                                        {
                                            "valueId": "uuid4"
                                        }
                                    ]
                                },
                                {
                                    "context": "composition",
                                    "contextType": "variable",
                                    "element": "extension",
                                    "variable": "extension"
                                },
                                {
                                    "context": "bundle",
                                    "contextType": "variable",
                                    "element": "entry",
                                    "variable": "e5"
                                },
                                {
                                    "context": "e5",
                                    "contextType": "variable",
                                    "element": "resource",
                                    "variable": "practitionerDataEnterer",
                                    "transform": "create",
                                    "parameter": [
                                        {
                                            "valueString": "Practitioner"
                                        }
                                    ]
                                },
                                {
                                    "context": "practitionerDataEnterer",
                                    "contextType": "variable",
                                    "element": "id",
                                    "variable": "uuid5",
                                    "transform": "uuid"
                                },
                                {
                                    "context": "e5",
                                    "contextType": "variable",
                                    "element": "fullUrl",
                                    "transform": "append",
                                    "parameter": [
                                        {
                                            "valueString": "urn:uuid:"
                                        },
                                        {
                                            "valueId": "uuid5"
                                        }
                                    ]
                                },
                                {
                                    "context": "practitionerRoleDataEnterer",
                                    "contextType": "variable",
                                    "element": "practitioner",
                                    "variable": "reference",
                                    "transform": "create",
                                    "parameter": [
                                        {
                                            "valueString": "Reference"
                                        }
                                    ]
                                },
                                {
                                    "context": "reference",
                                    "contextType": "variable",
                                    "element": "reference",
                                    "transform": "append",
                                    "parameter": [
                                        {
                                            "valueString": "urn:uuid:"
                                        },
                                        {
                                            "valueId": "uuid5"
                                        }
                                    ]
                                }
                            ],
                            "rule": [
                                {
                                    "name": "data",
                                    "source": [
                                        {
                                            "context": "item"
                                        }
                                    ],
                                    "dependent": [
                                        {
                                            "name": "UrgentNotificationContactForRequestItems",
                                            "variable": [
                                                "item",
                                                "practitionerRoleDataEnterer",
                                                "practitionerDataEnterer"
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "extension",
                                    "source": [
                                        {
                                            "context": "item"
                                        }
                                    ],
                                    "dependent": [
                                        {
                                            "name": "ExtOrfUrgentNotificationContactForRequest",
                                            "variable": [
                                                "item",
                                                "practitionerRoleDataEnterer",
                                                "extension"
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "order.notificationContactDocumentResponse",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "(linkId.value = 'order.notificationContactDocumentResponse')"
                        }
                    ],
                    "rule": [
                        {
                            "name": "order.notificationContactDocumentResponse.items",
                            "source": [
                                {
                                    "context": "item"
                                }
                            ],
                            "target": [
                                {
                                    "context": "bundle",
                                    "contextType": "variable",
                                    "element": "entry",
                                    "variable": "e4"
                                },
                                {
                                    "context": "e4",
                                    "contextType": "variable",
                                    "element": "resource",
                                    "variable": "practitionerRoleDataEnterer",
                                    "transform": "create",
                                    "parameter": [
                                        {
                                            "valueString": "PractitionerRole"
                                        }
                                    ]
                                },
                                {
                                    "context": "practitionerRoleDataEnterer",
                                    "contextType": "variable",
                                    "element": "id",
                                    "variable": "uuid4",
                                    "transform": "uuid"
                                },
                                {
                                    "context": "e4",
                                    "contextType": "variable",
                                    "element": "fullUrl",
                                    "transform": "append",
                                    "parameter": [
                                        {
                                            "valueString": "urn:uuid:"
                                        },
                                        {
                                            "valueId": "uuid4"
                                        }
                                    ]
                                },
                                {
                                    "context": "composition",
                                    "contextType": "variable",
                                    "element": "extension",
                                    "variable": "extension"
                                },
                                {
                                    "context": "bundle",
                                    "contextType": "variable",
                                    "element": "entry",
                                    "variable": "e5"
                                },
                                {
                                    "context": "e5",
                                    "contextType": "variable",
                                    "element": "resource",
                                    "variable": "practitionerDataEnterer",
                                    "transform": "create",
                                    "parameter": [
                                        {
                                            "valueString": "Practitioner"
                                        }
                                    ]
                                },
                                {
                                    "context": "practitionerDataEnterer",
                                    "contextType": "variable",
                                    "element": "id",
                                    "variable": "uuid5",
                                    "transform": "uuid"
                                },
                                {
                                    "context": "e5",
                                    "contextType": "variable",
                                    "element": "fullUrl",
                                    "transform": "append",
                                    "parameter": [
                                        {
                                            "valueString": "urn:uuid:"
                                        },
                                        {
                                            "valueId": "uuid5"
                                        }
                                    ]
                                },
                                {
                                    "context": "practitionerRoleDataEnterer",
                                    "contextType": "variable",
                                    "element": "practitioner",
                                    "variable": "reference",
                                    "transform": "create",
                                    "parameter": [
                                        {
                                            "valueString": "Reference"
                                        }
                                    ]
                                },
                                {
                                    "context": "reference",
                                    "contextType": "variable",
                                    "element": "reference",
                                    "transform": "append",
                                    "parameter": [
                                        {
                                            "valueString": "urn:uuid:"
                                        },
                                        {
                                            "valueId": "uuid5"
                                        }
                                    ]
                                }
                            ],
                            "rule": [
                                {
                                    "name": "data",
                                    "source": [
                                        {
                                            "context": "item"
                                        }
                                    ],
                                    "dependent": [
                                        {
                                            "name": "UrgentNotificationContactForResponseItems",
                                            "variable": [
                                                "item",
                                                "practitionerRoleDataEnterer",
                                                "practitionerDataEnterer"
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "extension",
                                    "source": [
                                        {
                                            "context": "item"
                                        }
                                    ],
                                    "dependent": [
                                        {
                                            "name": "ExtOrfUrgentNotificationContactForResponse",
                                            "variable": [
                                                "item",
                                                "practitionerRoleDataEnterer",
                                                "extension"
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "UrgentNotificationContactForRequestPractitionerItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitioner",
                    "type": "Practitioner",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.notificationContactDocument.practitioner.familyName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "family",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.notificationContactDocument.practitioner.givenName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "given",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.title",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.notificationContactDocument.practitioner.title') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "prefix",
                            "variable": "prefix",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        },
                        {
                            "context": "prefix",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "ext"
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier"
                                }
                            ]
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "value",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "code"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "AC"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.phone",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.notificationContactDocument.practitioner.phone') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "phone"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.email",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.notificationContactDocument.practitioner.email') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "email"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "UrgentNotificationContactForRequestItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitionerRole",
                    "type": "practitionerRole",
                    "mode": "target"
                },
                {
                    "name": "practitioner",
                    "type": "Practitioner",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "(linkId.value = 'order.notificationContactDocument.practitioner')"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "UrgentNotificationContactForRequestPractitionerItems",
                            "variable": [
                                "item",
                                "practitioner"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "ExtOrfUrgentNotificationContactForRequest",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitionerRole",
                    "type": "PractitionerRole",
                    "mode": "target"
                },
                {
                    "name": "ext",
                    "type": "Extension",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "url",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-urgentnoficationcontactforthisdocument"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "practitionerRole",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %practitionerRole.id"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "UrgentNotificationContactForResponsePractitionerItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitioner",
                    "type": "Practitioner",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.notificationContactDocumentResponse.practitioner.familyName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "family",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.notificationContactDocumentResponse.practitioner.givenName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "given",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.title",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.notificationContactDocumentResponse.practitioner.title') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "prefix",
                            "variable": "prefix",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        },
                        {
                            "context": "prefix",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "ext"
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier"
                                }
                            ]
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "value",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "code"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "AC"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.phone",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.notificationContactDocumentResponse.practitioner.phone') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "phone"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.email",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'order.notificationContactDocumentResponse.practitioner.email') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "email"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "UrgentNotificationContactForResponseItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitionerRole",
                    "type": "practitionerRole",
                    "mode": "target"
                },
                {
                    "name": "practitioner",
                    "type": "Practitioner",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "(linkId.value = 'order.notificationContactDocumentResponse.practitioner')"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "UrgentNotificationContactForResponsePractitionerItems",
                            "variable": [
                                "item",
                                "practitioner"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "ExtOrfUrgentNotificationContactForResponse",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitionerRole",
                    "type": "PractitionerRole",
                    "mode": "target"
                },
                {
                    "name": "ext",
                    "type": "Extension",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "url",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-urgentnoficationcontactfortheresponsetothisdocument"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "practitionerRole",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %practitionerRole.id"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "ReceiverPractitionerItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitioner",
                    "type": "Practitioner",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.practitioner.familyName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "family",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.practitioner.givenName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "given",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiver.practitioner.title",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.practitioner.title') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "prefix",
                            "variable": "prefix",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        },
                        {
                            "context": "prefix",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "ext"
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier"
                                }
                            ]
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "value",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "code"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "AC"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiver.practitioner.gln",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.practitioner.gln') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "urn:oid:2.51.1.3"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiver.practitioner.phone",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.practitioner.phone') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "phone"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiver.practitioner.email",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.practitioner.email') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "email"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "ReceiverOrganizationItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "organization",
                    "type": "Organization",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.organization.name') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "name",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiver.organization.gln",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.organization.gln') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "urn:oid:2.51.1.3"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item.answer",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.organization.streetAddressLine') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        }
                    ],
                    "rule": [
                        {
                            "name": "receiver.organization.streetAddressLine",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "answer",
                                    "variable": "answer"
                                }
                            ],
                            "target": [
                                {
                                    "context": "address",
                                    "contextType": "variable",
                                    "element": "line",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiver.organization.postalCode",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.organization.postalCode') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "postalCode",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiver.organization.city",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.organization.city') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "city",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiver.organization.country",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiver.organization.country') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "country",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "ReceiverItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                },
                {
                    "name": "practitionerRole",
                    "type": "practitionerRole",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "(linkId.value = 'receiver.practitioner')"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e2"
                        },
                        {
                            "context": "e2",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "practitioner",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Practitioner"
                                }
                            ]
                        },
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid2",
                            "transform": "uuid"
                        },
                        {
                            "context": "practitionerRole",
                            "contextType": "variable",
                            "element": "practitioner",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid2"
                                }
                            ]
                        },
                        {
                            "context": "e2",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid2"
                                }
                            ]
                        }
                    ],
                    "dependent": [
                        {
                            "name": "ReceiverPractitionerItems",
                            "variable": [
                                "item",
                                "practitioner"
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "(linkId.value = 'receiver.organization')"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e3"
                        },
                        {
                            "context": "e3",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "organization",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Organization"
                                }
                            ]
                        },
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid3",
                            "transform": "uuid"
                        },
                        {
                            "context": "practitionerRole",
                            "contextType": "variable",
                            "element": "organization",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid3"
                                }
                            ]
                        },
                        {
                            "context": "e3",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid3"
                                }
                            ]
                        }
                    ],
                    "dependent": [
                        {
                            "name": "ReceiverOrganizationItems",
                            "variable": [
                                "item",
                                "organization"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "ReceiverInit",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                },
                {
                    "name": "composition",
                    "type": "Composition",
                    "mode": "target"
                },
                {
                    "name": "serviceRequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "receiver",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e"
                        },
                        {
                            "context": "e",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "practitionerRole",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "PractitionerRole"
                                }
                            ]
                        },
                        {
                            "context": "practitionerRole",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid",
                            "transform": "uuid"
                        },
                        {
                            "context": "e",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "composition",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "ext"
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-receiver"
                                }
                            ]
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid"
                                }
                            ]
                        }
                    ],
                    "dependent": [
                        {
                            "name": "ReceiverItems",
                            "variable": [
                                "src",
                                "bundle",
                                "practitionerRole"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "PatientItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "type": "Patient",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "PatientItems",
                            "variable": [
                                "item",
                                "tgt"
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.familyName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "patientName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "family",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.maidenName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "use",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "maiden"
                                }
                            ]
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "family",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.givenName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "patientName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "given",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient.localPid",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.localPid') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "value",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "localpid"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "type",
                            "variable": "type"
                        },
                        {
                            "context": "type",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding"
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://terminology.hl7.org/CodeSystem/v2-0203"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "MR"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.valueString"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient.localPidDomain",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.localPidDomain') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "value",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "localpid"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.valueString"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.birthDate') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "birthDate",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.gender') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "gender",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value.code"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient.phone",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.phone') and answer.exists())"
                        }
                    ],
                    "rule": [
                        {
                            "name": "patient.phone",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "answer",
                                    "variable": "answer"
                                }
                            ],
                            "target": [
                                {
                                    "context": "tgt",
                                    "contextType": "variable",
                                    "element": "telecom",
                                    "variable": "value"
                                },
                                {
                                    "context": "value",
                                    "contextType": "variable",
                                    "element": "system",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "phone"
                                        }
                                    ]
                                },
                                {
                                    "context": "value",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient.email",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.email') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "email"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item.answer",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.streetAddressLine') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        }
                    ],
                    "rule": [
                        {
                            "name": "patient.streetAddressLine",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "answer",
                                    "variable": "answer"
                                }
                            ],
                            "target": [
                                {
                                    "context": "address",
                                    "contextType": "variable",
                                    "element": "line",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient.postalCode",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.postalCode') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "postalCode",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient.city",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.city') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "city",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient.country",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'patient.country') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "country",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "contact",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "(linkId.value = 'patient.contactperson')"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "contact",
                            "variable": "contact"
                        }
                    ],
                    "rule": [
                        {
                            "name": "item",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'patient.contactperson.familyName') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "contact",
                                    "contextType": "variable",
                                    "element": "name",
                                    "variable": "name",
                                    "listMode": [
                                        "share"
                                    ],
                                    "listRuleId": "contactName"
                                },
                                {
                                    "context": "name",
                                    "contextType": "variable",
                                    "element": "family",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "item",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'patient.contactperson.givenName') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "contact",
                                    "contextType": "variable",
                                    "element": "name",
                                    "variable": "name",
                                    "listMode": [
                                        "share"
                                    ],
                                    "listRuleId": "contactName"
                                },
                                {
                                    "context": "name",
                                    "contextType": "variable",
                                    "element": "given",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "patient.phone",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'patient.contactperson.phone') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "contact",
                                    "contextType": "variable",
                                    "element": "telecom",
                                    "variable": "value"
                                },
                                {
                                    "context": "value",
                                    "contextType": "variable",
                                    "element": "system",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "phone"
                                        }
                                    ]
                                },
                                {
                                    "context": "value",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "patient.email",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'patient.contactperson.email') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "contact",
                                    "contextType": "variable",
                                    "element": "telecom",
                                    "variable": "value"
                                },
                                {
                                    "context": "value",
                                    "contextType": "variable",
                                    "element": "system",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "email"
                                        }
                                    ]
                                },
                                {
                                    "context": "value",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "patient.contactperson.relationship",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'patient.contactperson.relationship') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "contact",
                                    "contextType": "variable",
                                    "element": "relationship",
                                    "variable": "relationship"
                                },
                                {
                                    "context": "relationship",
                                    "contextType": "variable",
                                    "element": "text",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "RequestedEncounterItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                },
                {
                    "name": "patient",
                    "type": "Patient",
                    "mode": "target"
                },
                {
                    "name": "serviceRequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "RequestedEncounterItems",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "encounter",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Encounter"
                                }
                            ]
                        },
                        {
                            "context": "encounter",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "encounter",
                            "contextType": "variable",
                            "element": "status",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "planned"
                                }
                            ]
                        },
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "extension"
                        },
                        {
                            "context": "encounter",
                            "contextType": "variable",
                            "element": "subject",
                            "variable": "subject",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "subject",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %patient.id"
                                }
                            ]
                        },
                        {
                            "context": "extension",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-requestedencounterdetails"
                                }
                            ]
                        },
                        {
                            "context": "extension",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "requestedEncounter.class",
                            "source": [
                                {
                                    "context": "src",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'requestedEncounter.class') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "encounter",
                                    "contextType": "variable",
                                    "element": "class",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "requestedEncounter.desiredAccommodation",
                            "source": [
                                {
                                    "context": "src",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'requestedEncounter.desiredAccommodation') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "encounter",
                                    "contextType": "variable",
                                    "element": "extension",
                                    "variable": "extension"
                                },
                                {
                                    "context": "extension",
                                    "contextType": "variable",
                                    "element": "url",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-desiredaccommodation"
                                        }
                                    ]
                                },
                                {
                                    "context": "extension",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "Coverage",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                },
                {
                    "name": "patient",
                    "type": "Patient",
                    "mode": "target"
                },
                {
                    "name": "serviceRequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "coverage.beneficiary",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "where(linkId.value = 'coverage.beneficiary')"
                        }
                    ],
                    "rule": [
                        {
                            "name": "coverage.beneficiary.ahvn13",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.beneficiary.ahvn13') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "patient",
                                    "contextType": "variable",
                                    "element": "identifier",
                                    "variable": "identifier"
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "system",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "urn:oid:2.16.756.5.32"
                                        }
                                    ]
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "coveragekvg",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "where(linkId.value = 'coverage.kvg')"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "coverage",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coverage"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "insurance",
                            "variable": "insurance"
                        },
                        {
                            "context": "insurance",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "status",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "active"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "beneficiary",
                            "variable": "subject",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "subject",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %patient.id"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "type",
                            "variable": "type"
                        },
                        {
                            "context": "type",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding"
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coveragetype"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "KVG"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "coverage.kvg.name",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.kvg.name') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "payor",
                                    "variable": "payor"
                                },
                                {
                                    "context": "payor",
                                    "contextType": "variable",
                                    "element": "reference",
                                    "variable": "refcontained"
                                },
                                {
                                    "context": "refcontained",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "#org"
                                        }
                                    ]
                                },
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "contained",
                                    "variable": "organization",
                                    "transform": "create",
                                    "parameter": [
                                        {
                                            "valueString": "Organization"
                                        }
                                    ]
                                },
                                {
                                    "context": "organization",
                                    "contextType": "variable",
                                    "element": "id",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "org"
                                        }
                                    ]
                                },
                                {
                                    "context": "organization",
                                    "contextType": "variable",
                                    "element": "name",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "coverage.kvg.insuranceCardNumber",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.kvg.insuranceCardNumber') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "identifier",
                                    "variable": "identifier"
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "type",
                                    "variable": "typeid"
                                },
                                {
                                    "context": "typeid",
                                    "contextType": "variable",
                                    "element": "coding",
                                    "variable": "coding"
                                },
                                {
                                    "context": "coding",
                                    "contextType": "variable",
                                    "element": "system",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coverageidentifiertype"
                                        }
                                    ]
                                },
                                {
                                    "context": "coding",
                                    "contextType": "variable",
                                    "element": "code",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "VeKa"
                                        }
                                    ]
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "coverageuvg",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "where(linkId.value = 'coverage.uvg')"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "coverage",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coverage"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "insurance",
                            "variable": "insurance"
                        },
                        {
                            "context": "insurance",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "status",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "active"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "beneficiary",
                            "variable": "subject",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "subject",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %patient.id"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "type",
                            "variable": "type"
                        },
                        {
                            "context": "type",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding"
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coveragetype"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "UVG"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "coverage.uvg.name",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.uvg.name') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "payor",
                                    "variable": "payor"
                                },
                                {
                                    "context": "payor",
                                    "contextType": "variable",
                                    "element": "reference",
                                    "variable": "refcontained"
                                },
                                {
                                    "context": "refcontained",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "#org"
                                        }
                                    ]
                                },
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "contained",
                                    "variable": "organization",
                                    "transform": "create",
                                    "parameter": [
                                        {
                                            "valueString": "Organization"
                                        }
                                    ]
                                },
                                {
                                    "context": "organization",
                                    "contextType": "variable",
                                    "element": "id",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "org"
                                        }
                                    ]
                                },
                                {
                                    "context": "organization",
                                    "contextType": "variable",
                                    "element": "name",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "coverage.uvg.claimNumber",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.uvg.claimNumber') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "identifier",
                                    "variable": "identifier"
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "type",
                                    "variable": "typeid"
                                },
                                {
                                    "context": "typeid",
                                    "contextType": "variable",
                                    "element": "coding",
                                    "variable": "coding"
                                },
                                {
                                    "context": "coding",
                                    "contextType": "variable",
                                    "element": "system",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coverageidentifiertype"
                                        }
                                    ]
                                },
                                {
                                    "context": "coding",
                                    "contextType": "variable",
                                    "element": "code",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "Claim"
                                        }
                                    ]
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "coveragevvg",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "where(linkId.value = 'coverage.vvg')"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "coverage",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coverage"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "insurance",
                            "variable": "insurance"
                        },
                        {
                            "context": "insurance",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "status",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "active"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "beneficiary",
                            "variable": "subject",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "subject",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %patient.id"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "type",
                            "variable": "type"
                        },
                        {
                            "context": "type",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding"
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coveragetype"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "VVG"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "coverage.vvg.name",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.vvg.name') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "payor",
                                    "variable": "payor"
                                },
                                {
                                    "context": "payor",
                                    "contextType": "variable",
                                    "element": "reference",
                                    "variable": "refcontained"
                                },
                                {
                                    "context": "refcontained",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "#org"
                                        }
                                    ]
                                },
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "contained",
                                    "variable": "organization",
                                    "transform": "create",
                                    "parameter": [
                                        {
                                            "valueString": "Organization"
                                        }
                                    ]
                                },
                                {
                                    "context": "organization",
                                    "contextType": "variable",
                                    "element": "id",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "org"
                                        }
                                    ]
                                },
                                {
                                    "context": "organization",
                                    "contextType": "variable",
                                    "element": "name",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "coverage.vvg.insuranceCardNumber",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.vvg.insuranceCardNumber') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "identifier",
                                    "variable": "identifier"
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "type",
                                    "variable": "typeid"
                                },
                                {
                                    "context": "typeid",
                                    "contextType": "variable",
                                    "element": "coding",
                                    "variable": "coding"
                                },
                                {
                                    "context": "coding",
                                    "contextType": "variable",
                                    "element": "system",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coverageidentifiertype"
                                        }
                                    ]
                                },
                                {
                                    "context": "coding",
                                    "contextType": "variable",
                                    "element": "code",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "VeKa"
                                        }
                                    ]
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "coverageiv",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "where(linkId.value = 'coverage.iv')"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "coverage",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coverage"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "insurance",
                            "variable": "insurance"
                        },
                        {
                            "context": "insurance",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "status",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "active"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "beneficiary",
                            "variable": "subject",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "subject",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %patient.id"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "type",
                            "variable": "type"
                        },
                        {
                            "context": "type",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding"
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coveragetype"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "IVG"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "coverage.iv.verfuegungsnummer",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.iv.verfuegungsnummer') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "identifier",
                                    "variable": "identifier"
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "type",
                                    "variable": "typeid"
                                },
                                {
                                    "context": "typeid",
                                    "contextType": "variable",
                                    "element": "coding",
                                    "variable": "coding"
                                },
                                {
                                    "context": "coding",
                                    "contextType": "variable",
                                    "element": "system",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coverageidentifiertype"
                                        }
                                    ]
                                },
                                {
                                    "context": "coding",
                                    "contextType": "variable",
                                    "element": "code",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "IV"
                                        }
                                    ]
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "coveragemv",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "where(linkId.value = 'coverage.mv')"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "coverage",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coverage"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "insurance",
                            "variable": "insurance"
                        },
                        {
                            "context": "insurance",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "status",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "active"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "beneficiary",
                            "variable": "subject",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "subject",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %patient.id"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "type",
                            "variable": "type"
                        },
                        {
                            "context": "type",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding"
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coveragetype"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "MVG"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "coverage.mv.versichertennummer",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.mv.versichertennummer') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "identifier",
                                    "variable": "identifier"
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "type",
                                    "variable": "typeid"
                                },
                                {
                                    "context": "typeid",
                                    "contextType": "variable",
                                    "element": "coding",
                                    "variable": "coding"
                                },
                                {
                                    "context": "coding",
                                    "contextType": "variable",
                                    "element": "system",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coverageidentifiertype"
                                        }
                                    ]
                                },
                                {
                                    "context": "coding",
                                    "contextType": "variable",
                                    "element": "code",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "MV"
                                        }
                                    ]
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "coverageself",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "where(linkId.value = 'coverage.self')"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "coverage",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coverage"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "insurance",
                            "variable": "insurance"
                        },
                        {
                            "context": "insurance",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "status",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "active"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "beneficiary",
                            "variable": "subject",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "subject",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %patient.id"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "type",
                            "variable": "type"
                        },
                        {
                            "context": "type",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding"
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coveragetype"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "Self"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "payor",
                            "variable": "payor"
                        },
                        {
                            "context": "payor",
                            "contextType": "variable",
                            "element": "reference",
                            "variable": "refcontained"
                        },
                        {
                            "context": "refcontained",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "#pat"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "contained",
                            "variable": "patient",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Patient"
                                }
                            ]
                        },
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "pat"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "coverage.self.familyName",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.self.familyName') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "patient",
                                    "contextType": "variable",
                                    "element": "name",
                                    "variable": "name",
                                    "listMode": [
                                        "share"
                                    ],
                                    "listRuleId": "selfname"
                                },
                                {
                                    "context": "name",
                                    "contextType": "variable",
                                    "element": "family",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "coverage.self.givenName",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.self.givenName') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "patient",
                                    "contextType": "variable",
                                    "element": "name",
                                    "variable": "name",
                                    "listMode": [
                                        "share"
                                    ],
                                    "listRuleId": "selfname"
                                },
                                {
                                    "context": "name",
                                    "contextType": "variable",
                                    "element": "given",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "coveragevvg",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "where(linkId.value = 'coverage.other')"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "coverage",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coverage"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "insurance",
                            "variable": "insurance"
                        },
                        {
                            "context": "insurance",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "status",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "active"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "beneficiary",
                            "variable": "subject",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "subject",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %patient.id"
                                }
                            ]
                        },
                        {
                            "context": "coverage",
                            "contextType": "variable",
                            "element": "type",
                            "variable": "type"
                        },
                        {
                            "context": "type",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding"
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/CodeSystem/ch-orf-cs-coveragetype"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "Other"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "coverage.other.name",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.other.name') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "payor",
                                    "variable": "payor"
                                },
                                {
                                    "context": "payor",
                                    "contextType": "variable",
                                    "element": "reference",
                                    "variable": "refcontained"
                                },
                                {
                                    "context": "refcontained",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "#org"
                                        }
                                    ]
                                },
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "contained",
                                    "variable": "organization",
                                    "transform": "create",
                                    "parameter": [
                                        {
                                            "valueString": "Organization"
                                        }
                                    ]
                                },
                                {
                                    "context": "organization",
                                    "contextType": "variable",
                                    "element": "id",
                                    "transform": "copy",
                                    "parameter": [
                                        {
                                            "valueString": "org"
                                        }
                                    ]
                                },
                                {
                                    "context": "organization",
                                    "contextType": "variable",
                                    "element": "name",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "coverage.other.id",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'coverage.other.id') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "coverage",
                                    "contextType": "variable",
                                    "element": "identifier",
                                    "variable": "identifier"
                                },
                                {
                                    "context": "identifier",
                                    "contextType": "variable",
                                    "element": "value",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "SenderAuthorPractitionerItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitioner",
                    "type": "Practitioner",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.practitioner.familyName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "family",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.practitioner.givenName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "given",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.title",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.practitioner.title') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "prefix",
                            "variable": "prefix",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        },
                        {
                            "context": "prefix",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "ext"
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier"
                                }
                            ]
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "value",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "code"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "AC"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.gln",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.practitioner.gln') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "urn:oid:2.51.1.3"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.phone",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.practitioner.phone') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "phone"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.email",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.practitioner.email') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "email"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "SenderAuthorOrganizationItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "organization",
                    "type": "Organization",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.organization.name') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "name",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.organization.gln",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.organization.gln') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "urn:oid:2.51.1.3"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item.answer",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.organization.streetAddressLine') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        }
                    ],
                    "rule": [
                        {
                            "name": "sender.author.organization.streetAddressLine",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "answer",
                                    "variable": "answer"
                                }
                            ],
                            "target": [
                                {
                                    "context": "address",
                                    "contextType": "variable",
                                    "element": "line",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.organization.postalCode",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.organization.postalCode') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "postalCode",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.organization.city",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.organization.city') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "city",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.organization.country",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.author.organization.country') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "country",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "SenderAuthorItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitionerRole",
                    "type": "practitionerRole",
                    "mode": "target"
                },
                {
                    "name": "practitioner",
                    "type": "Practitioner",
                    "mode": "target"
                },
                {
                    "name": "organization",
                    "type": "Organization",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "(linkId.value = 'sender.author.practitioner')"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "SenderAuthorPractitionerItems",
                            "variable": [
                                "item",
                                "practitioner"
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "(linkId.value = 'sender.author.organization')"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "SenderAuthorOrganizationItems",
                            "variable": [
                                "item",
                                "organization"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "SenderDataEntererPractitionerItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitioner",
                    "type": "Practitioner",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.dataenterer.practitioner.familyName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "family",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.dataenterer.practitioner.givenName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "practitionerName"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "given",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.phone",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.dataenterer.practitioner.phone') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "phone"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sender.author.practitioner.email",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'sender.dataenterer.practitioner.email') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "email"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "SenderDataEntererItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitionerRole",
                    "type": "practitionerRole",
                    "mode": "target"
                },
                {
                    "name": "practitioner",
                    "type": "Practitioner",
                    "mode": "target"
                },
                {
                    "name": "organization",
                    "type": "Organization",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "(linkId.value = 'sender.dataenterer.practitioner')"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "SenderDataEntererPractitionerItems",
                            "variable": [
                                "item",
                                "practitioner"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "ChExtEprDataEnterer",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "practitionerRole",
                    "type": "PractitionerRole",
                    "mode": "target"
                },
                {
                    "name": "ext",
                    "type": "Extension",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "url",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-dataenterer"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "practitionerRole",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "ext"
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "enterer"
                                }
                            ]
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %practitionerRole.id"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "SenderAuthorInit",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                },
                {
                    "name": "composition",
                    "type": "Composition",
                    "mode": "target"
                },
                {
                    "name": "serviceRequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "sender",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e"
                        },
                        {
                            "context": "e",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "practitionerRole",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "PractitionerRole"
                                }
                            ]
                        },
                        {
                            "context": "practitionerRole",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid",
                            "transform": "uuid"
                        },
                        {
                            "context": "e",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e2"
                        },
                        {
                            "context": "e2",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "practitioner",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Practitioner"
                                }
                            ]
                        },
                        {
                            "context": "practitioner",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid2",
                            "transform": "uuid"
                        },
                        {
                            "context": "e2",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid2"
                                }
                            ]
                        },
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e3"
                        },
                        {
                            "context": "e3",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "organization",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Organization"
                                }
                            ]
                        },
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid3",
                            "transform": "uuid"
                        },
                        {
                            "context": "e3",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid3"
                                }
                            ]
                        },
                        {
                            "context": "composition",
                            "contextType": "variable",
                            "element": "author",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "requester",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "practitionerRole",
                            "contextType": "variable",
                            "element": "practitioner",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid2"
                                }
                            ]
                        },
                        {
                            "context": "practitionerRole",
                            "contextType": "variable",
                            "element": "organization",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid3"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "sender.author",
                            "source": [
                                {
                                    "context": "src",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "(linkId.value = 'sender.author')"
                                }
                            ],
                            "dependent": [
                                {
                                    "name": "SenderAuthorItems",
                                    "variable": [
                                        "item",
                                        "practitionerRole",
                                        "practitioner",
                                        "organization"
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "sender.dataenterer",
                            "source": [
                                {
                                    "context": "src",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "(linkId.value = 'sender.dataenterer')"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "sender.dataenterer.items",
                                    "source": [
                                        {
                                            "context": "item"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "e4"
                                        },
                                        {
                                            "context": "e4",
                                            "contextType": "variable",
                                            "element": "resource",
                                            "variable": "practitionerRoleDataEnterer",
                                            "transform": "create",
                                            "parameter": [
                                                {
                                                    "valueString": "PractitionerRole"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "practitionerRoleDataEnterer",
                                            "contextType": "variable",
                                            "element": "id",
                                            "variable": "uuid4",
                                            "transform": "uuid"
                                        },
                                        {
                                            "context": "e4",
                                            "contextType": "variable",
                                            "element": "fullUrl",
                                            "transform": "append",
                                            "parameter": [
                                                {
                                                    "valueString": "urn:uuid:"
                                                },
                                                {
                                                    "valueId": "uuid4"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "composition",
                                            "contextType": "variable",
                                            "element": "extension",
                                            "variable": "extension"
                                        },
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "e5"
                                        },
                                        {
                                            "context": "e5",
                                            "contextType": "variable",
                                            "element": "resource",
                                            "variable": "practitionerDataEnterer",
                                            "transform": "create",
                                            "parameter": [
                                                {
                                                    "valueString": "Practitioner"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "practitionerDataEnterer",
                                            "contextType": "variable",
                                            "element": "id",
                                            "variable": "uuid5",
                                            "transform": "uuid"
                                        },
                                        {
                                            "context": "e5",
                                            "contextType": "variable",
                                            "element": "fullUrl",
                                            "transform": "append",
                                            "parameter": [
                                                {
                                                    "valueString": "urn:uuid:"
                                                },
                                                {
                                                    "valueId": "uuid5"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "practitionerRoleDataEnterer",
                                            "contextType": "variable",
                                            "element": "practitioner",
                                            "variable": "reference",
                                            "transform": "create",
                                            "parameter": [
                                                {
                                                    "valueString": "Reference"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "reference",
                                            "contextType": "variable",
                                            "element": "reference",
                                            "transform": "append",
                                            "parameter": [
                                                {
                                                    "valueString": "urn:uuid:"
                                                },
                                                {
                                                    "valueId": "uuid5"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "practitionerRoleDataEnterer",
                                            "contextType": "variable",
                                            "element": "organization",
                                            "variable": "reference",
                                            "transform": "create",
                                            "parameter": [
                                                {
                                                    "valueString": "Reference"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "reference",
                                            "contextType": "variable",
                                            "element": "reference",
                                            "transform": "append",
                                            "parameter": [
                                                {
                                                    "valueString": "urn:uuid:"
                                                },
                                                {
                                                    "valueId": "uuid3"
                                                }
                                            ]
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "data",
                                            "source": [
                                                {
                                                    "context": "item"
                                                }
                                            ],
                                            "dependent": [
                                                {
                                                    "name": "SenderDataEntererItems",
                                                    "variable": [
                                                        "item",
                                                        "practitionerRoleDataEnterer",
                                                        "practitionerDataEnterer",
                                                        "organization"
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "extension",
                                            "source": [
                                                {
                                                    "context": "item"
                                                }
                                            ],
                                            "dependent": [
                                                {
                                                    "name": "ChExtEprDataEnterer",
                                                    "variable": [
                                                        "item",
                                                        "practitionerRoleDataEnterer",
                                                        "extension"
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "CopyReceiverPatientItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "patient",
                    "type": "Patient",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.familyName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "name"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "family",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.givenName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "name"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "given",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.title",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.title') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "name"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "prefix",
                            "variable": "prefix",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        },
                        {
                            "context": "prefix",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "ext"
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier"
                                }
                            ]
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "value",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "code"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "AC"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.phone",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.phone') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "phone"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.email",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.email') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "email"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item.answer",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.streetAddressLine') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        }
                    ],
                    "rule": [
                        {
                            "name": "receiverCopy.streetAddressLine",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "answer",
                                    "variable": "answer"
                                }
                            ],
                            "target": [
                                {
                                    "context": "address",
                                    "contextType": "variable",
                                    "element": "line",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.postalCode",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.postalCode') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "postalCode",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.city",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.city') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "city",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.country",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.country') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "country",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "ExtOrfCopyReceiverPatient",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "patient",
                    "type": "Patient",
                    "mode": "target"
                },
                {
                    "name": "ext",
                    "type": "Extension",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "url",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-copyreceiver"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %patient.id"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "CopyReceiverOrganizationItems",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "organization",
                    "type": "Organization",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.organization.name') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "name",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.familyName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "contact",
                            "variable": "contact",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "contact"
                        },
                        {
                            "context": "contact",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "name"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "family",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.givenName') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "contact",
                            "variable": "contact",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "contact"
                        },
                        {
                            "context": "contact",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "name"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "given",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.title",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.title') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "contact",
                            "variable": "contact",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "contact"
                        },
                        {
                            "context": "contact",
                            "contextType": "variable",
                            "element": "name",
                            "variable": "name",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "name"
                        },
                        {
                            "context": "name",
                            "contextType": "variable",
                            "element": "prefix",
                            "variable": "prefix",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        },
                        {
                            "context": "prefix",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "ext"
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier"
                                }
                            ]
                        },
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "value",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "code"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "AC"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.phone",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.phone') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "phone"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.email",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.email') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "telecom",
                            "variable": "value"
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "email"
                                }
                            ]
                        },
                        {
                            "context": "value",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item.answer",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.streetAddressLine') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        }
                    ],
                    "rule": [
                        {
                            "name": "receiverCopy.streetAddressLine",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "answer",
                                    "variable": "answer"
                                }
                            ],
                            "target": [
                                {
                                    "context": "address",
                                    "contextType": "variable",
                                    "element": "line",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "answer.value"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.postalCode",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.postalCode') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "postalCode",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.city",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.city') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "city",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopy.country",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId.value = 'receiverCopy.country') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "address",
                            "variable": "address",
                            "listMode": [
                                "share"
                            ],
                            "listRuleId": "orgAddress"
                        },
                        {
                            "context": "address",
                            "contextType": "variable",
                            "element": "country",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "ExtOrfCopyReceiverOrganization",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "organization",
                    "type": "Organization",
                    "mode": "target"
                },
                {
                    "name": "ext",
                    "type": "Extension",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "url",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-copyreceiver"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "organization",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "ext",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %organization.id"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "ReceiverCopy",
            "typeMode": "none",
            "input": [
                {
                    "name": "grp",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                },
                {
                    "name": "composition",
                    "type": "Composition",
                    "mode": "target"
                },
                {
                    "name": "serviceRequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "receiverCopyOrganization",
                    "source": [
                        {
                            "context": "grp",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId = 'receiverCopy') and item.where(linkId = 'receiverCopy.organization.name').answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "organization",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Organization"
                                }
                            ]
                        },
                        {
                            "context": "composition",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "extension"
                        },
                        {
                            "context": "organization",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid4"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "data",
                            "source": [
                                {
                                    "context": "item"
                                }
                            ],
                            "dependent": [
                                {
                                    "name": "CopyReceiverOrganizationItems",
                                    "variable": [
                                        "item",
                                        "organization"
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "extension",
                            "source": [
                                {
                                    "context": "item"
                                }
                            ],
                            "dependent": [
                                {
                                    "name": "ExtOrfCopyReceiverOrganization",
                                    "variable": [
                                        "item",
                                        "organization",
                                        "extension"
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "receiverCopyPatient",
                    "source": [
                        {
                            "context": "grp",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId = 'receiverCopy') and item.where(linkId = 'receiverCopy.organization.name').answer.exists().not())"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "patient",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Patient"
                                }
                            ]
                        },
                        {
                            "context": "composition",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "extension"
                        },
                        {
                            "context": "patient",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "append",
                            "parameter": [
                                {
                                    "valueString": "urn:uuid:"
                                },
                                {
                                    "valueId": "uuid4"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "data",
                            "source": [
                                {
                                    "context": "item"
                                }
                            ],
                            "dependent": [
                                {
                                    "name": "CopyReceiverPatientItems",
                                    "variable": [
                                        "item",
                                        "patient"
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "extension",
                            "source": [
                                {
                                    "context": "item"
                                }
                            ],
                            "dependent": [
                                {
                                    "name": "ExtOrfCopyReceiverPatient",
                                    "variable": [
                                        "item",
                                        "patient",
                                        "extension"
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "Appointment",
            "typeMode": "none",
            "input": [
                {
                    "name": "grp",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                },
                {
                    "name": "composition",
                    "type": "Composition",
                    "mode": "target"
                },
                {
                    "name": "serviceRequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "Appointment",
                    "source": [
                        {
                            "context": "grp"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "e4"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "resource",
                            "variable": "appointment",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Appointment"
                                }
                            ]
                        },
                        {
                            "context": "appointment",
                            "contextType": "variable",
                            "element": "id",
                            "variable": "uuid4",
                            "transform": "uuid"
                        },
                        {
                            "context": "e4",
                            "contextType": "variable",
                            "element": "fullUrl",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        },
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "extension",
                            "variable": "extension"
                        },
                        {
                            "context": "extension",
                            "contextType": "variable",
                            "element": "url",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-locationandtime"
                                }
                            ]
                        },
                        {
                            "context": "extension",
                            "contextType": "variable",
                            "element": "value",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %uuid4"
                                }
                            ]
                        }
                    ],
                    "rule": [
                        {
                            "name": "appointment.status.code",
                            "source": [
                                {
                                    "context": "grp",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'appointment.status') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "appointment",
                                    "contextType": "variable",
                                    "element": "status",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value.code"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "appointment.requestedPeriod",
                            "source": [
                                {
                                    "context": "grp",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "(linkId.value = 'appointment.requestedPeriod')"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "appointment.requestedPeriod.start",
                                    "source": [
                                        {
                                            "context": "item",
                                            "element": "item",
                                            "variable": "item2",
                                            "condition": "((linkId.value = 'appointment.requestedPeriod.start') and answer.exists())"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "appointment",
                                            "contextType": "variable",
                                            "element": "requestedPeriod",
                                            "variable": "requestedPeriod"
                                        },
                                        {
                                            "context": "requestedPeriod",
                                            "contextType": "variable",
                                            "element": "start",
                                            "transform": "evaluate",
                                            "parameter": [
                                                {
                                                    "valueString": "item2.answer.value"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "requestedPeriod",
                                            "contextType": "variable",
                                            "element": "end",
                                            "transform": "evaluate",
                                            "parameter": [
                                                {
                                                    "valueString": "item2.answer.value"
                                                }
                                            ]
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "appointment.requestedPeriod.end if not same as start",
                                            "source": [
                                                {
                                                    "context": "item",
                                                    "element": "item",
                                                    "variable": "item3",
                                                    "condition": "((linkId.value = 'appointment.requestedPeriod.end') and answer.exists())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "requestedPeriod",
                                                    "contextType": "variable",
                                                    "element": "end",
                                                    "transform": "evaluate",
                                                    "parameter": [
                                                        {
                                                            "valueString": "item3.answer.value"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "appointment.patientInstruction",
                            "source": [
                                {
                                    "context": "grp",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "((linkId.value = 'appointment.patientInstruction') and answer.exists())"
                                }
                            ],
                            "target": [
                                {
                                    "context": "appointment",
                                    "contextType": "variable",
                                    "element": "patientInstruction",
                                    "transform": "evaluate",
                                    "parameter": [
                                        {
                                            "valueString": "item.answer.value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "appointment.location",
                            "source": [
                                {
                                    "context": "grp",
                                    "element": "item",
                                    "variable": "item",
                                    "condition": "(linkId.value = 'appointment.location')"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "location",
                                    "source": [
                                        {
                                            "context": "item"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "e5"
                                        },
                                        {
                                            "context": "e5",
                                            "contextType": "variable",
                                            "element": "resource",
                                            "variable": "location",
                                            "transform": "create",
                                            "parameter": [
                                                {
                                                    "valueString": "Location"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "location",
                                            "contextType": "variable",
                                            "element": "id",
                                            "variable": "uuid5",
                                            "transform": "uuid"
                                        },
                                        {
                                            "context": "e5",
                                            "contextType": "variable",
                                            "element": "fullUrl",
                                            "transform": "evaluate",
                                            "parameter": [
                                                {
                                                    "valueString": "'urn:uuid:' + %uuid5"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "appointment",
                                            "contextType": "variable",
                                            "element": "participant",
                                            "variable": "participant"
                                        },
                                        {
                                            "context": "participant",
                                            "contextType": "variable",
                                            "element": "status",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueString": "tentative"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "participant",
                                            "contextType": "variable",
                                            "element": "actor",
                                            "variable": "actor",
                                            "transform": "create",
                                            "parameter": [
                                                {
                                                    "valueString": "Reference"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "actor",
                                            "contextType": "variable",
                                            "element": "reference",
                                            "transform": "evaluate",
                                            "parameter": [
                                                {
                                                    "valueString": "'urn:uuid:' + %location.id"
                                                }
                                            ]
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "item",
                                            "source": [
                                                {
                                                    "context": "item",
                                                    "element": "item",
                                                    "variable": "item3",
                                                    "condition": "((linkId.value = 'appointment.location.name') and answer.exists())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "location",
                                                    "contextType": "variable",
                                                    "element": "name",
                                                    "transform": "evaluate",
                                                    "parameter": [
                                                        {
                                                            "valueString": "item3.answer.value"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "appointment.location.phone",
                                            "source": [
                                                {
                                                    "context": "item",
                                                    "element": "item",
                                                    "variable": "item3",
                                                    "condition": "((linkId.value = 'appointment.location.phone') and answer.exists())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "location",
                                                    "contextType": "variable",
                                                    "element": "telecom",
                                                    "variable": "value"
                                                },
                                                {
                                                    "context": "value",
                                                    "contextType": "variable",
                                                    "element": "system",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "phone"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "value",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "evaluate",
                                                    "parameter": [
                                                        {
                                                            "valueString": "item3.answer.value"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "appointment.location.email",
                                            "source": [
                                                {
                                                    "context": "item",
                                                    "element": "item",
                                                    "variable": "item3",
                                                    "condition": "((linkId.value = 'appointment.location.email') and answer.exists())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "location",
                                                    "contextType": "variable",
                                                    "element": "telecom",
                                                    "variable": "value"
                                                },
                                                {
                                                    "context": "value",
                                                    "contextType": "variable",
                                                    "element": "system",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "email"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "value",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "evaluate",
                                                    "parameter": [
                                                        {
                                                            "valueString": "item3.answer.value"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "appointment.location.streetAddressLine",
                                            "source": [
                                                {
                                                    "context": "item",
                                                    "element": "item",
                                                    "variable": "item3",
                                                    "condition": "((linkId.value = 'appointment.location.streetAddressLine') and answer.exists())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "location",
                                                    "contextType": "variable",
                                                    "element": "address",
                                                    "variable": "address",
                                                    "listMode": [
                                                        "share"
                                                    ],
                                                    "listRuleId": "orgAddress"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "line",
                                                    "source": [
                                                        {
                                                            "context": "item",
                                                            "element": "answer",
                                                            "variable": "answer"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "address",
                                                            "contextType": "variable",
                                                            "element": "line",
                                                            "transform": "evaluate",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "answer.value"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "appointment.location.postalCode",
                                            "source": [
                                                {
                                                    "context": "item",
                                                    "element": "item",
                                                    "variable": "item3",
                                                    "condition": "((linkId.value = 'appointment.location.postalCode') and answer.exists())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "location",
                                                    "contextType": "variable",
                                                    "element": "address",
                                                    "variable": "address",
                                                    "listMode": [
                                                        "share"
                                                    ],
                                                    "listRuleId": "orgAddress"
                                                },
                                                {
                                                    "context": "address",
                                                    "contextType": "variable",
                                                    "element": "postalCode",
                                                    "transform": "evaluate",
                                                    "parameter": [
                                                        {
                                                            "valueString": "item3.answer.value"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "appointment.location.city",
                                            "source": [
                                                {
                                                    "context": "item",
                                                    "element": "item",
                                                    "variable": "item3",
                                                    "condition": "((linkId.value = 'appointment.location.city') and answer.exists())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "location",
                                                    "contextType": "variable",
                                                    "element": "address",
                                                    "variable": "address",
                                                    "listMode": [
                                                        "share"
                                                    ],
                                                    "listRuleId": "orgAddress"
                                                },
                                                {
                                                    "context": "address",
                                                    "contextType": "variable",
                                                    "element": "city",
                                                    "transform": "evaluate",
                                                    "parameter": [
                                                        {
                                                            "valueString": "item3.answer.value"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "appointment.location.country",
                                            "source": [
                                                {
                                                    "context": "item",
                                                    "element": "item",
                                                    "variable": "item3",
                                                    "condition": "((linkId.value = 'appointment.location.country') and answer.exists())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "location",
                                                    "contextType": "variable",
                                                    "element": "address",
                                                    "variable": "address",
                                                    "listMode": [
                                                        "share"
                                                    ],
                                                    "listRuleId": "orgAddress"
                                                },
                                                {
                                                    "context": "address",
                                                    "contextType": "variable",
                                                    "element": "country",
                                                    "transform": "evaluate",
                                                    "parameter": [
                                                        {
                                                            "valueString": "item3.answer.value"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "PreviousResults",
            "typeMode": "none",
            "input": [
                {
                    "name": "grp",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                },
                {
                    "name": "serviceRequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "grp",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId = 'previousResults.attachment') and answer.exists())"
                        }
                    ],
                    "rule": [
                        {
                            "name": "answer",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "answer",
                                    "variable": "answer"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "media",
                                    "source": [
                                        {
                                            "context": "answer",
                                            "type": "Attachment",
                                            "element": "value",
                                            "variable": "attachment"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "e"
                                        },
                                        {
                                            "context": "e",
                                            "contextType": "variable",
                                            "element": "resource",
                                            "variable": "media",
                                            "transform": "create",
                                            "parameter": [
                                                {
                                                    "valueString": "Media"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "media",
                                            "contextType": "variable",
                                            "element": "id",
                                            "variable": "uuid",
                                            "transform": "uuid"
                                        },
                                        {
                                            "context": "media",
                                            "contextType": "variable",
                                            "element": "status",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueString": "completed"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "e",
                                            "contextType": "variable",
                                            "element": "fullUrl",
                                            "transform": "append",
                                            "parameter": [
                                                {
                                                    "valueString": "urn:uuid:"
                                                },
                                                {
                                                    "valueId": "uuid"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "media",
                                            "contextType": "variable",
                                            "element": "content",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "attachment"
                                                }
                                            ]
                                        },
                                        {
                                            "context": "serviceRequest",
                                            "contextType": "variable",
                                            "element": "supportingInfo",
                                            "variable": "supportingInfo"
                                        },
                                        {
                                            "context": "supportingInfo",
                                            "contextType": "variable",
                                            "element": "reference",
                                            "transform": "evaluate",
                                            "parameter": [
                                                {
                                                    "valueString": "'urn:uuid:' + uuid"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "Note",
            "typeMode": "none",
            "input": [
                {
                    "name": "grp",
                    "type": "BackboneElement",
                    "mode": "source"
                },
                {
                    "name": "serviceRequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "note.text",
                    "source": [
                        {
                            "context": "grp",
                            "element": "item",
                            "variable": "item",
                            "condition": "((linkId = 'note.text') and answer.exists())"
                        }
                    ],
                    "target": [
                        {
                            "context": "serviceRequest",
                            "contextType": "variable",
                            "element": "note",
                            "variable": "note"
                        },
                        {
                            "context": "note",
                            "contextType": "variable",
                            "element": "text",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "item.answer.value"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "QrToBundle",
            "typeMode": "none",
            "input": [
                {
                    "name": "qr",
                    "type": "QuestionnaireResponse",
                    "mode": "source"
                },
                {
                    "name": "q",
                    "type": "Questionnaire",
                    "mode": "target"
                },
                {
                    "name": "patient",
                    "type": "Patient",
                    "mode": "target"
                },
                {
                    "name": "questionnaireresp",
                    "type": "QuestionnaireResponse",
                    "mode": "target"
                },
                {
                    "name": "servicerequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                },
                {
                    "name": "composition",
                    "type": "Composition",
                    "mode": "target"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id",
                    "source": [
                        {
                            "context": "qr"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "type",
                    "source": [
                        {
                            "context": "qr"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "type",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "document"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "composition",
                    "source": [
                        {
                            "context": "qr"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "OrfComposition",
                            "variable": [
                                "qr",
                                "q",
                                "composition",
                                "patient",
                                "questionnaireresp",
                                "servicerequest",
                                "bundle"
                            ]
                        }
                    ]
                },
                {
                    "name": "qrgroups",
                    "source": [
                        {
                            "context": "qr"
                        }
                    ],
                    "dependent": [
                        {
                            "name": "QrToGroups",
                            "variable": [
                                "qr",
                                "patient",
                                "bundle",
                                "composition",
                                "servicerequest"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "OrfComposition",
            "typeMode": "none",
            "input": [
                {
                    "name": "qr",
                    "type": "QuestionnaireResponse",
                    "mode": "source"
                },
                {
                    "name": "q",
                    "type": "Questionnaire",
                    "mode": "target"
                },
                {
                    "name": "tgt",
                    "type": "Composition",
                    "mode": "target"
                },
                {
                    "name": "patient",
                    "type": "Patient",
                    "mode": "target"
                },
                {
                    "name": "questionnaireresp",
                    "type": "QuestionnaireResponse",
                    "mode": "target"
                },
                {
                    "name": "servicerequest",
                    "type": "ServiceRequest",
                    "mode": "target"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "status",
                    "source": [
                        {
                            "context": "qr"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "status",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "final"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "subject",
                    "source": [
                        {
                            "context": "qr"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %patient.id"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "sections",
                    "source": [
                        {
                            "context": "qr"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "section",
                            "variable": "tgtSection"
                        },
                        {
                            "context": "tgtSection",
                            "contextType": "variable",
                            "element": "title",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "Order-Referral"
                                }
                            ]
                        },
                        {
                            "context": "tgtSection",
                            "contextType": "variable",
                            "element": "code",
                            "variable": "code"
                        },
                        {
                            "context": "code",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding"
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://loinc.org"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "93037-0"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "display",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "Portable medical order form"
                                }
                            ]
                        },
                        {
                            "context": "tgtSection",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %questionnaireresp.id"
                                }
                            ]
                        },
                        {
                            "context": "tgtSection",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %servicerequest.id"
                                }
                            ]
                        },
                        {
                            "context": "tgtSection",
                            "contextType": "variable",
                            "element": "entry",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %q.id"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "servicerequest",
                    "source": [
                        {
                            "context": "qr"
                        }
                    ],
                    "target": [
                        {
                            "context": "servicerequest",
                            "contextType": "variable",
                            "element": "status",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "active"
                                }
                            ]
                        },
                        {
                            "context": "servicerequest",
                            "contextType": "variable",
                            "element": "intent",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "order"
                                }
                            ]
                        },
                        {
                            "context": "servicerequest",
                            "contextType": "variable",
                            "element": "subject",
                            "variable": "reference",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Reference"
                                }
                            ]
                        },
                        {
                            "context": "reference",
                            "contextType": "variable",
                            "element": "reference",
                            "transform": "evaluate",
                            "parameter": [
                                {
                                    "valueString": "'urn:uuid:' + %patient.id"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}